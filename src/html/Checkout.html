<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PuffnSip - Product Selection</title>

    <!-- SWIPER -->
    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />

    <!-- Font Awesome CDN Link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Custom CSS File Link -->
    <link rel="stylesheet" href="/src/css/CoStyle.css">
    <link rel="stylesheet" href="/src/css/style.css">
    <!-- Web Icon -->
    <link rel="icon" type="image/x-icon" href="/src/image/coffee_vape_icon.ico">
</head>

<body>
    
    <!-- Authentication Check Script -->
    <script>
        // Immediate authentication check before page loads
        function checkAuthBeforeLoad() {
            const isLoggedIn = sessionStorage.getItem('userLoggedIn') === 'true' || 
                             localStorage.getItem('userLoggedIn') === 'true';
            
            if (!isLoggedIn) {
                // Store the current page as intended destination
                sessionStorage.setItem('intendedPage', window.location.href);
                alert('Please log in to access the checkout page.');
                window.location.href = '/src/html/LogSign.html';
                return false;
            }
            return true;
        }
        
        // Run check immediately
        if (!checkAuthBeforeLoad()) {
            document.body.style.display = 'none'; // Hide content while redirecting
        }
    </script>
    
    <!-- HEADER -->
    <header class="header">
        <div id="menu-btn" class="fas fa-bars"></div>

        <a href="#" class="logo">PuffnSip <i class="fas fa-mug-hot"></i></a>

        <nav class="navbar">
            <a href="/index.html">home</a>
            <a href="/src/html/About.html">about</a>
            <a href="/src/html/Menu.html">menu</a>
            <a href="/src/html/Checkout.html">checkout</a>
        </nav>
            <a href="/src/html/LogSign.html" class = "btn"> Login/Signup</a>

    </header>
    <div class="main-container">
        <div class="page-title">
            <h1><i class="fas fa-shopping-cart"></i> Product Selection</h1>
            <p>Choose your favorite coffee and vape products</p>
            <div class="user-welcome" id="userWelcome" style="margin-top: 10px; color: #ffffff; font-weight: bold; font-size: 30px;">
                <!-- Welcome message will be inserted here -->
            </div>
        </div>
        
        <div class="header-row">
            <div>Product</div>
            <div>Unit Price</div>
            <div>Quantity</div>
            <div>Total Price</div>
        </div>
        
        <!-- COFFEE SECTION -->
        <div class="section-header">
            <div class="section-title">
                <i class="fas fa-mug-hot section-icon"></i>
                COFFEE COLLECTION
            </div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        
        <div class="product-row" data-category="coffee">
            <div class="product-info">
                <img src="/src/image/menu-1.png" alt="Caramel Coffee" class="product-image">
                <div class="product-details">
                    <h3>Caramel</h3>
                    <p class="product-description">A rich, aromatic blend where the boldness of coffee meets the creamy sweetness of caramel for a perfectly indulgent sip.</p>
                    <div class="category-badge">COFFEE</div>
                </div>
            </div>
            <div class="price">$2</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <div class="product-row" data-category="coffee">
            <div class="product-info">
                <img src="/src/image/menu-2.png" alt="Vanilla Coffee" class="product-image">
                <div class="product-details">
                    <h3>Vanilla</h3>
                    <p class="product-description">A smooth and aromatic blend of bold coffee with the creamy, subtly sweet essence of vanilla, creating a comforting and elegant flavor.</p>
                    <div class="category-badge">COFFEE</div>
                </div>
            </div>
            <div class="price">$2</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <div class="product-row" data-category="coffee">
            <div class="product-info">
                <img src="/src/image/menu-3.png" alt="Mocha Coffee" class="product-image">
                <div class="product-details">
                    <h3>Mocha</h3>
                    <p class="product-description">A rich and indulgent blend of espresso, creamy steamed milk, and chocolate, creating a smooth, slightly sweet, and comforting flavor.</p>
                    <div class="category-badge">COFFEE</div>
                </div>
            </div>
            <div class="price">$2</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <div class="product-row" data-category="coffee">
            <div class="product-info">
                <img src="/src/image/menu-4.png" alt="Hazelnut Coffee" class="product-image">
                <div class="product-details">
                    <h3>Hazelnut</h3>
                    <p class="product-description">A warm, nutty blend of rich coffee and the toasty sweetness of hazelnut, creating a smooth, aromatic, and slightly creamy experience.</p>
                    <div class="category-badge">COFFEE</div>
                </div>
            </div>
            <div class="price">$2</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <div class="product-row" data-category="coffee">
            <div class="product-info">
                <img src="/src/image/menu-5.png" alt="Pumpkin Spice Coffee" class="product-image">
                <div class="product-details">
                    <h3>Pumpkin Spice</h3>
                    <p class="product-description">A cozy blend of bold coffee with warm spices like cinnamon, nutmeg, and cloves, creating a rich, aromatic, and autumn-inspired flavor.</p>
                    <div class="category-badge">COFFEE</div>
                </div>
            </div>
            <div class="price">$2</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <div class="product-row" data-category="coffee">
            <div class="product-info">
                <img src="/src/image/menu-6.png" alt="Peppermint Coffee" class="product-image">
                <div class="product-details">
                    <h3>Peppermint</h3>
                    <p class="product-description">A refreshing blend of rich coffee with cool, minty peppermint, creating a bold, invigorating, and slightly sweet flavor.</p>
                    <div class="category-badge">COFFEE</div>
                </div>
            </div>
            <div class="price">$2</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <!-- VAPE SECTION -->
        <div class="section-header">
            <div class="section-title2">
                <i class="fas fa-cloud section-icon"></i>
                VAPE COLLECTION
            </div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        
        <div class="product-row" data-category="vape">
            <div class="product-info">
                <img src="/src/image/vape1.png" alt="Puff Deluxe" class="product-image">
                <div class="product-details">
                    <h3>Puff Deluxe</h3>
                    <p class="product-description">A sophisticated box-style device featuring a powerful 6000mAh battery and a seamless refillable system, delivering unparalleled performance and luxury.</p>
                    <div class="category-badge vape-badge">VAPE</div>
                </div>
            </div>
            <div class="price">$20</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <div class="product-row" data-category="vape">
            <div class="product-info">
                <img src="/src/image/vape2.png" alt="Puff Premium" class="product-image">
                <div class="product-details">
                    <h3>Puff Premium</h3>
                    <p class="product-description">A sleek 3000mAh pen-style device that merges advanced rechargeable technology with a seamless refillable design, delivering an exquisite experience.</p>
                    <div class="category-badge vape-badge">VAPE</div>
                </div>
            </div>
            <div class="price">$15</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <div class="product-row" data-category="vape">
            <div class="product-info">
                <img src="/src/image/vape3.png" alt="Strawberry Surge" class="product-image">
                <div class="product-details">
                    <h3>Strawberry Surge</h3>
                    <p class="product-description">Indulge in the rich, juicy essence of strawberries with the ultra-premium Strawberry Surge disposable vape—crafted for an extraordinary 100,000-puff experience.</p>
                    <div class="category-badge vape-badge">VAPE</div>
                </div>
            </div>
            <div class="price">$10</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
        
        <div class="product-row" data-category="vape">
            <div class="product-info">
                <img src="/src/image/vape4.webp" alt="CloudBerry Burst" class="product-image">
                <div class="product-details">
                    <h3>CloudBerry Burst</h3>
                    <p class="product-description">Unleash the bold essence of ripe grapes with CloudBerry Burst—a premium disposable vape engineered for a smooth, intense, and long-lasting 100,000-puff experience.</p>
                    <div class="category-badge vape-badge">VAPE</div>
                </div>
            </div>
            <div class="price">$10</div>
            <div class="quantity-controls">
                <button class="qty-btn" onclick="decreaseQty(this)">−</button>
                <input type="number" value="0" min="0" class="qty-input" onchange="updateTotal(this)">
                <button class="qty-btn" onclick="increaseQty(this)">+</button>
            </div>
            <div class="total-price">
                <div class="total-amount">$0</div>
            </div>
        </div>
    </div>

    <!-- Floating Cart Summary -->
    <div class="cart-summary" onclick="proceedToCheckout()">
        <i class="fas fa-shopping-cart cart-icon"></i>
        <span id="cartTotal">Cart: $0</span>
    </div>

    <!-- Footer -->
    <section class="footer">
        <div class="box-container">
            <div class="box">
                <h3>our branches</h3>
                <a href="#"><i class="fas fa-arrow-right"></i> Bacolor Pampanga </a>
                <a href="#"><i class="fas fa-arrow-right"></i> Quezon City Manila</a>
            </div>

            <div class="box">
                <h3>contact info</h3>
                <a href="#"><i class="fas fa-phone"></i> 0997 557 4582 - Pampanga Branch </a>
                <a href="#"><i class="fas fa-phone"></i> 0981 544 2918 - Manila Branch </a>
                <a href="#"><i class="fas fa-envelope"></i> puffnsipbacolor@gmail.com</a>
                <a href="#"><i class="fas fa-envelope"></i> puffnsipquezoncity@gmail.com</a>
            </div>

            <div class="box">
                <h3>socials</h3>
                <a href="#"><i class="fab fa-facebook-f"></i> facebook</a>
                <a href="#"><i class="fab fa-instagram"></i> instagram</a>
            </div>
        </div>

        <div class="credit"> <span>PuffnSip </span> | all rights reserved 2025</div>
    </section>

    <!-- SWIPER -->
    <script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>

    <!-- Custom JS File Link  -->
    <script src="js/script.js"></script>

    <!-- Include the authentication script -->
    <script src="/src/js/auth.js"></script>
    <!-- Include the original checkout script -->
    <script src="/src/js/CoJs.js"></script>
    
    <!-- Additional authentication handling for this page -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const isLoggedIn = sessionStorage.getItem('userLoggedIn') === 'true';
            const authBtn = document.getElementById('authBtn');

            if (isLoggedIn) {
                authBtn.textContent = 'Logout';
                authBtn.href = '#';
                authBtn.addEventListener('click', () => {
                    sessionStorage.removeItem('userLoggedIn');
                    window.location.reload();
                });

                const userWelcome = document.getElementById('userWelcome');
                if (userWelcome) {
                    userWelcome.textContent = 'Welcome back!';
                }
            }
        });

        // Quantity control functions
        function increaseQty(btn) {
            const input = btn.previousElementSibling;
            input.value = parseInt(input.value) + 1;
            updateTotal(input);
        }

        function decreaseQty(btn) {
            const input = btn.nextElementSibling;
            if (parseInt(input.value) > 0) {
                input.value = parseInt(input.value) - 1;
                updateTotal(input);
            }
        }

        function updateTotal(input) {
            const row = input.closest('.product-row');
            const price = parseFloat(row.querySelector('.price').textContent.replace('$', ''));
            const quantity = parseInt(input.value) || 0;
            const total = price * quantity;
            
            row.querySelector('.total-amount').textContent = '$' + total;
            updateCartTotal();
        }

        function updateCartTotal() {
            let cartTotal = 0;
            document.querySelectorAll('.total-amount').forEach(total => {
                cartTotal += parseFloat(total.textContent.replace('$', '')) || 0;
            });
            document.getElementById('cartTotal').textContent = 'Cart: $' + cartTotal;
        }

        function proceedToCheckout() {
            const cartTotal = document.getElementById('cartTotal').textContent;
            if (cartTotal === 'Cart: $0') {
                alert('Please add items to your cart before proceeding to checkout.');
                return;
            }
            alert('Proceeding to checkout with ' + cartTotal);
        }

        // Mobile menu toggle
        document.getElementById('menu-btn').addEventListener('click', () => {
            document.querySelector('.navbar').classList.toggle('active');
        });
    </script>

</body>
</html>
           